<!doctype html>
<html>
	<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <link rel="stylesheet" href="../css/styles.css">
    <link rel="stylesheet" href="../css/schlechtwetterfront_dark.css">
    <link rel="stylesheet" href="../css/schlechtwetterfront_light.css">
    <script src="../js/respond.js"></script>
    <script src="../js/jquery-1.11.0.min.js"></script>
    <link rel="icon" type="image/png" href="../favicon.png"/>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>ZE File Formats - .TER</title>
</head>
	<body>
		<div class="container">
		
			

<div class="sidebar">
	<sidebar_title>ZE File Formats - .TER</sidebar_title>
	<div class="hr_dark"></div>
	<div class="sidebar-content-scrollable">
	
	    <category_label>Navigation</category_label><br>
	    
	        <a class="rectangle_button" href="index.html">Back</a>
	    
	        <a class="rectangle_button" href="#general_info">General Info</a>
	    
	        <a class="rectangle_button" href="#terrain_header">Terrain Header</a>
	    
	        <a class="rectangle_button" href="#terrain_blocks">Terrain Blocks</a>
	    
	        <a class="rectangle_button" href="#terrain_structs">Terrain Structs</a>
	    
	    <div class="hr_dark"></div>
	
	    <category_label>Personal</category_label><br>
	    
	        <a class="rectangle_button" href="http://schlechtwetterfront.github.io/">Personal Homepage</a>
	    
	    <div class="hr_dark"></div>
	
	</div>
	<script type="text/javascript">
		var count = 0;

		count =  $("a.rectangle_button").length;

		var height = parseInt($("a.rectangle_button").css("height")) * count + $("category_label").length * parseInt($("category_label").css("height")) + parseInt($("sidebar_title").css("height"));
		// $("div .sidebar").css("height", height + 10);
		// $("div .sidebar").css("max-height", height + 10);
	</script>
</div>
			

<div class="content">
	
		<div class="section">
			<a name="general_info"></a>
				<div>
					<div class="section-header">General Info</div>
					
		<a class="toggle_collapse" content-id="general_info_content" id="general_info_content_start" starts-collapsed="False">Collapse</a>
	
				</div>
				<div id="general_info_content" class="section-content">
				<p>Terrain files (*.ter) represent a single terrain to be used by a world. This file format is generated by ZeroEditor and used during the munge process to create the <em>tern</em> chunk within *.lvl files.</p>
				
		<div></div>
	
				</div>
			<div class="hr"></div>
		</div>
	
		<div class="section">
			<a name="terrain_header"></a>
				<div>
					<div class="section-header">Terrain Header</div>
					
		<a class="toggle_collapse" content-id="terrain_header_content" id="terrain_header_content_start" starts-collapsed="False">Collapse</a>
	
				</div>
				<div id="terrain_header_content" class="section-content">
				<p>The Terrain Header is always 2821 bytes in length.</p>
<table>
<thead>
<tr>
<th>Data Type</th>
<th>Size (bytes)</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="orange">byte [4]</td>
<td>4</td>
<td>Terrain Header Marker (TERR).</td>
</tr>
<tr>
<td class="red">long int</td>
<td>4</td>
<td>.TER file version number (21 for SWBF, 22 for SWBFII).</td>
</tr>
<tr>
<td class="red">short int [4]</td>
<td>8</td>
<td>Terrain extents. <em>Example: -8, -8, 8, 8 for a 16x16 map.</em></td>
</tr>
<tr>
<td class="red">long int</td>
<td>4</td>
<td>Unknown</td>
</tr>
<tr>
<td class="red">float [16]</td>
<td>64</td>
<td>Tile-range for each texture layer. _0.031 (1/32): the texture spans 32 meters. This is stored as 1/X of the value in ZeroEditor.</td>
</tr>
<tr>
<td class="orange">byte [16]</td>
<td>16</td>
<td>Mapping for each texture-layer. 0 is normal.</td>
</tr>
<tr>
<td class="orange">byte [64]</td>
<td>64</td>
<td>Unknown. Possibly 16 floats for texture-layer rotations.</td>
</tr>
<tr>
<td class="red">float </td>
<td>4</td>
<td>Map scale multiplier.</td>
</tr>
<tr>
<td class="red">float</td>
<td>4</td>
<td>Grid-scale. Distance between points.</td>
</tr>
<tr>
<td class="red">long int</td>
<td>4</td>
<td>Unknown.</td>
</tr>
<tr>
<td class="red">long int</td>
<td>4</td>
<td>Full map size stored in the .TER file. The same or bigger than the map extents.</td>
</tr>
<tr>
<td class="orange">byte </td>
<td>1</td>
<td>Unkown.</td>
</tr>
<tr>
<td>TextureLayer [16]</td>
<td>1024</td>
<td>Texture layers (see below).</td>
</tr>
<tr>
<td>WaterLayer [16]</td>
<td>1086</td>
<td>Water layers (see below).</td>
</tr>
<tr>
<td class="orange">byte [524]</td>
<td>524</td>
<td>Unknown.</td>
</tr>
</tbody>
</table>
				
		<div></div>
	
				</div>
			<div class="hr"></div>
		</div>
	
		<div class="section">
			<a name="terrain_blocks"></a>
				<div>
					<div class="section-header">Terrain Blocks</div>
					
		<a class="toggle_collapse" content-id="terrain_blocks_content" id="terrain_blocks_content_start" starts-collapsed="False">Collapse</a>
	
				</div>
				<div id="terrain_blocks_content" class="section-content">
				<p>The Terrain Header is always 2821 bytes in length.</p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Data Type</th>
<th>Length</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Height</strong></td>
<td class="red">signed short</td>
<td>Full map size * Full map size * 2</td>
</tr>
<tr>
<td></td>
<td></td>
<td>Height value for every point on the grid. This value will be multiplied with the map scale multiplier.</td>
</tr>
<tr>
<td><strong>Color</strong></td>
<td class="red">float [4]</td>
<td>Full map size * Full map size</td>
</tr>
<tr>
<td></td>
<td></td>
<td>Color values for every point on the grid. 4 floats (from 0.0 to 1.0) corresponding to the RGBA channels.</td>
</tr>
<tr>
<td><strong>Color 2</strong></td>
<td class="red">float [4]</td>
<td>Full map size * Full map size</td>
</tr>
<tr>
<td></td>
<td></td>
<td>Color values for every point on the grid. 4 floats (from 0.0 to 1.0) corresponding to the RGBA channels.</td>
</tr>
<tr>
<td><strong>Texture</strong></td>
<td class="orange">byte [16]</td>
<td>Full map size * Full map size</td>
</tr>
<tr>
<td></td>
<td></td>
<td>One byte (0-255) for each texture layer indicating the transparency of its texture layer.</td>
</tr>
<tr>
<td><strong>Water</strong></td>
<td class="orange">byte</td>
<td>Full map size * Full map size / 2</td>
</tr>
<tr>
<td></td>
<td></td>
<td>Structure unknown.</td>
</tr>
<tr>
<td><strong>Foliage</strong></td>
<td class="orange">byte</td>
<td>Full map size * Full map size / 2</td>
</tr>
<tr>
<td></td>
<td></td>
<td>Structure unknown.</td>
</tr>
</tbody>
</table>
				
		<div></div>
	
				</div>
			<div class="hr"></div>
		</div>
	
		<div class="section">
			<a name="terrain_structs"></a>
				<div>
					<div class="section-header">Terrain Structs</div>
					
		<a class="toggle_collapse" content-id="terrain_structs_content" id="terrain_structs_content_start" starts-collapsed="False">Collapse</a>
	
				</div>
				<div id="terrain_structs_content" class="section-content">
				<h3>TextureLayer</h3>
<table>
<thead>
<tr>
<th>Data Type</th>
<th>Size (bytes)</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="green">char [32]</td>
<td>32</td>
<td>Diffuse texture name.</td>
</tr>
<tr>
<td class="green">char [32]</td>
<td>32</td>
<td>Detail texture name.</td>
</tr>
</tbody>
</table>
<h3>WaterLayer</h3>
<table>
<thead>
<tr>
<th>Data Type</th>
<th>Size (bytes)</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="red">float [2]</td>
<td>8</td>
<td>Water height value (twice).</td>
</tr>
<tr>
<td class="orange">byte [8]</td>
<td>8</td>
<td>Unknown, always zero.</td>
</tr>
<tr>
<td class="red">float [2]</td>
<td>8</td>
<td>UV animation velocity.</td>
</tr>
<tr>
<td class="red">float [2]</td>
<td>8</td>
<td>UV animation repeat.</td>
</tr>
<tr>
<td class="orange">byte [4]</td>
<td>4</td>
<td>RGBA color values.</td>
</tr>
<tr>
<td class="green">char [32]</td>
<td>32</td>
<td>Water texture name.</td>
</tr>
</tbody>
</table>
				
		<div></div>
	
				</div>
			<div class="hr"></div>
		</div>
	
</div>
		
		</div>
		<script type="text/javascript">
			window.onload = function() {
				function shadeBlend(p,c0,c1) {
    var n=p<0?p*-1:p,u=Math.round,w=parseInt;
    if(c0.length>7){
        var f=c0.split(","),t=(c1?c1:p<0?"rgb(0,0,0)":"rgb(255,255,255)").split(","),R=w(f[0].slice(4)),G=w(f[1]),B=w(f[2]);
        return "rgb("+(u((w(t[0].slice(4))-R)*n)+R)+","+(u((w(t[1])-G)*n)+G)+","+(u((w(t[2])-B)*n)+B)+")"
    }else{
        var f=w(c0.slice(1),16),t=w((c1?c1:p<0?"#000000":"#FFFFFF").slice(1),16),R1=f>>16,G1=f>>8&0x00FF,B1=f&0x0000FF;
        return "#"+(0x1000000+(u(((t>>16)-R1)*n)+R1)*0x10000+(u(((t>>8&0x00FF)-G1)*n)+G1)*0x100+(u(((t&0x0000FF)-B1)*n)+B1)).toString(16).slice(1)
    }
}

var colors = [
    "#ff7676", // reddish
    // "#8d76ff", // darker violet
    // "#d77f64", // orange
    "#919ddb", // brighter blue
    "#6AAF6A", // green
];

// Choose random hover color for all elments.
var box_hover_color = colors[Math.floor(Math.random() * colors.length)];

var box_darkened_color = shadeBlend(-0.3, box_hover_color);

var box_brightened_color = shadeBlend(0.5, box_hover_color);

var box_normal_color = "#252525";

// I LOVE HACKS FeelsGoodMan
var theme_map = {
    "rgb(255, 255, 255)": "bright",
    "rgb(0, 0, 0)": "dark",
};

var bg_color = $("head").css("background-color");
var theme = theme_map[bg_color];

var link_color_map_hover = {
    "bright": box_darkened_color,
    "dark": box_brightened_color,
};

$("div.content a").css({"color": box_hover_color, "border-bottom": "1px dotted " + box_hover_color});
$("div.content a").hover(
	function() {
		$(this).css({"color": link_color_map_hover[theme],
					"border-bottom": "1px solid " + link_color_map_hover[theme]});
	},
	function() {
		$(this).css({"color": box_hover_color,
					"border-bottom": "1px dotted " + box_hover_color,
					"text-decoration": "none"});
	});

				function slideToggleContent(id) {
    if (id.substr(0, 1) != "#") {
        id = "#" + id;
    }
    var content = id + "_content";

    $(content).slideToggle(250, function () {
        $(content + "_start").text(function () {
            return $(content).is(":visible") ? "Collapse" : "Expand";
        })
    });
}

function showContent(id) {
    if (id.substr(0, 1) != "#") {
        id = "#" + id;
    }
    var content = id + "_content";
    if ($(content).is(":visible")) {
        return;
    }
    $(content).slideToggle(250, function () {
        $(content + "_start").text(function () {
            return $(content).is(":visible") ? "Collapse" : "Expand";
        })
    });
}

$("a.toggle_collapse").click(function () {
    var header = $(this);
    var content = $("#" + $(this).attr("content-id"));

    $(content).slideToggle(250, function () {

        header.text(function () {

            return $(content).is(":visible") ? "Collapse" : "Expand";
        });
    });

});

$("a.toggle_collapse_end").click(function () {
    var header = $(this);
    var content_text = "#" + $(this).attr("content-id");
    var content = $("#" + $(this).attr("content-id"));

    $(content).slideToggle(250, function () {
        $(content_text + "_start").text(function () {
            return $(content).is(":visible") ? "Collapse" : "Expand";
        })
    });

});

$("a.toggle_collapse").each(function () {
    var header = $(this);
    var content = $("#" + $(this).attr("content-id"));

    if ($(this).attr("starts-collapsed") == "True") {
        $(content).slideToggle(0, function () {

            header.text(function () {

                return $(content).is(":visible") ? "Collapse" : "Expand";
            });
        });
    }
});


$("a.rectangle_button").click(function() {
    var id = $(this).attr("href");
    showContent(id);
});


$("a.rectangle_button").hover(
    function() {
        $(this).children("indent-child").css("visibility", "hidden");
    },
    function() {
        $(this).children("indent-child").css("visibility", "visible");
    }
);


$(document).ready(function () {
    var parts = window.location.href.split("#");
    if(parts.length > 1) {
       var id = parts[ parts.length-1 ];
       showContent(id);
    }
});

				$("div .sidebar").css("background-color", box_hover_color);
			};
		</script>
	</body>
</html>