<!doctype html>
<html>
	<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <!-- <link rel="stylesheet" href="../css/styles.css"> -->
    <!-- <link rel="stylesheet" href="../css/schlechtwetterfront_dark.css"> -->
    <!-- <link rel="stylesheet" href="../css/schlechtwetterfront_light.css"> -->
    <link rel="stylesheet" href="../css/bootstrap.min.css">
    <link rel="stylesheet" href="../css/shared.css">
    <link rel="stylesheet" href="../css/site.css">
    <link rel="stylesheet" href="../css/site-mainpage.css">
    <script src="../js/respond.js"></script>
    <script src="../js/jquery-1.11.0.min.js"></script>
    <script src="../js/bootstrap.min.js"></script>
    <script src="../js/schlechtwetterfront_functional.js"></script>
    <script src="../js/schlechtwetterfront_visual.js"></script>
    <link rel="icon" type="image/png" href="../favicon.png"/>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>ZE File Formats - .TER</title>
</head>
	<body>
        <div class="container-fluid hidden-lg hidden-md">
    <nav class="navbar" id="s-navbar">
        <ul class="nav navbar-nav">
            
            <li class="dropdown">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Navigation</a>
                <ul class="dropdown-menu">
                
                    <li><a href="#overview" class="rectangle-button rectangle-button-semi">Overview</a></li>
                
                    <li><a href="index.html" class="rectangle-button rectangle-button-semi">Back</a></li>
                
                </ul>
            
            <li class="dropdown">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Format</a>
                <ul class="dropdown-menu">
                
                    <li><a href="#terrain_header" class="rectangle-button rectangle-button-semi">Terrain Header</a></li>
                
                    <li><a href="#terrain_blocks" class="rectangle-button rectangle-button-semi">Terrain Blocks</a></li>
                
                    <li><a href="#terrain_structs" class="rectangle-button rectangle-button-semi">Terrain Structs</a></li>
                
                </ul>
            
            </li>
        </ul>
    </nav>
</div>
		<div class="container-fluid container-main">
            <div class="row">
    		
    			

<div class="col-md-2" role="complementary">
	<nav class="affix hidden-xs hidden-sm">
		<div class="sidebar">
			<a href="http://schlechtwetterfront.github.io/" class="sidebar-homepage"></a>
            <div class="sidebar-title">

            ZE File Formats - .TER
            </div>
			<div class="hr"></div>
			<div id="sidebar-content">
			
				<div class="category_label">Navigation</div>
				
				
			        
		<a class="rectangle-button rectangle-button-semi" href="#overview">Overview</a>
	
			    
			        
		<a class="rectangle-button rectangle-button-semi" href="index.html">Back</a>
	
			    
			    
			
				<div class="category_label">Format</div>
				
				<div class="sidebar-content-scrollable">
				
				
			        
		<a class="rectangle-button rectangle-button-semi" href="#terrain_header">Terrain Header</a>
	
			    
			        
		<a class="rectangle-button rectangle-button-semi" href="#terrain_blocks">Terrain Blocks</a>
	
			    
			        
		<a class="rectangle-button rectangle-button-semi" href="#terrain_structs">Terrain Structs</a>
	
			    
			    
				</div>
				
			
			</div>
		</div>
	</nav>
</div>
    			

<!-- <div class="content"> -->
<div class="col-md-10 section-container" role="main">
	
		<div class="section">
				<div class="section-header" name="overview">Overview</div>

				<div id="overview_content" class="section-content">
				<p>Terrain files (*.ter) represent a single terrain to be used by a world. This file format is generated by ZeroEditor and used during the munge process to create the <em>tern</em> chunk within *.lvl files.</p>
				</div>
		</div>
	
		<div class="section">
				<div class="section-header" name="structure">Structure</div>

				<div id="structure_content" class="section-content">
				<table>
<thead>
<tr>
<th>Name</th>
<th>Size (bytes)</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Terrain Header</td>
<td>2820/2821 (v21/22)</td>
<td>Header storing general information about the terrain.</td>
</tr>
<tr>
<td>Height Block</td>
<td><strong>size * size</strong> * 2</td>
<td>Height grid data.</td>
</tr>
<tr>
<td>Color Block</td>
<td><strong>size * size</strong> * 4</td>
<td>RGBA colors for the terrain grid.</td>
</tr>
<tr>
<td>Color Block ?</td>
<td><strong>size * size</strong> * 4</td>
<td>RGBA colors for the terrain grid.</td>
</tr>
<tr>
<td>Color Block ?</td>
<td><strong>size * size</strong> * 4</td>
<td>RGBA colors for the terrain grid.</td>
</tr>
<tr>
<td>Texture Block</td>
<td><strong>size * size</strong> * 16</td>
<td>Texture layer opacity for the terrain grid.</td>
</tr>
<tr>
<td>?</td>
<td><strong>size * size</strong> * ?</td>
<td>Maybe Water/Foliage.</td>
</tr>
<tr>
<td>?</td>
<td><strong>size * size</strong> * ?</td>
<td>Probably Water.</td>
</tr>
<tr>
<td>?</td>
<td>?</td>
<td>?</td>
</tr>
<tr>
<td>?</td>
<td>Variable</td>
<td></td>
</tr>
</tbody>
</table>
				</div>
		</div>
	
		<div class="section">
				<div class="section-header" name="terrain_header">Terrain Header</div>

				<div id="terrain_header_content" class="section-content">
				<p>The Terrain Header is always 2821 bytes in length.</p>
<table>
<thead>
<tr>
<th>Data Type</th>
<th>Size (bytes)</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="orange">byte [4]</td>
<td>4</td>
<td>Terrain Header Marker (TERR).</td>
</tr>
<tr>
<td class="red">long int</td>
<td>4</td>
<td>.TER file version number (21 for SWBF, 22 for SWBFII).</td>
</tr>
<tr>
<td class="red">short int [4]</td>
<td>8</td>
<td>Terrain extents. <em>Example: -8, -8, 8, 8 for a 16x16 map.</em></td>
</tr>
<tr>
<td class="red">long int</td>
<td>4</td>
<td>? (ie. 164)</td>
</tr>
<tr>
<td class="red">float [16]</td>
<td>64</td>
<td>Tile-range for each texture layer. _0.031 (1/32): the texture spans 32 meters. This is stored as 1/X of the value in ZeroEditor.</td>
</tr>
<tr>
<td class="orange">byte [16]</td>
<td>16</td>
<td>Mapping for each texture-layer. 0 is normal.</td>
</tr>
<tr>
<td class="orange">byte [64]</td>
<td>64</td>
<td>Unknown. Possibly 16 floats for texture-layer rotations.</td>
</tr>
<tr>
<td class="red">float </td>
<td>4</td>
<td>Map scale multiplier.</td>
</tr>
<tr>
<td class="red">float</td>
<td>4</td>
<td>Grid-scale. Distance between points.</td>
</tr>
<tr>
<td class="red">long int</td>
<td>4</td>
<td>? (1)</td>
</tr>
<tr>
<td class="red">long int</td>
<td>4</td>
<td>Full map size stored in the .TER file. The same or bigger than the map extents.</td>
</tr>
<tr>
<td class="red">long int</td>
<td>4</td>
<td>? (2)</td>
</tr>
<tr>
<td class="orange">byte </td>
<td>1</td>
<td>? (0F) Only exists in SWBF II (version 22) terrain.</td>
</tr>
<tr>
<td>TextureLayer [16]</td>
<td>1024</td>
<td>Texture layers (see below).</td>
</tr>
<tr>
<td>WaterLayer [16]</td>
<td>1086</td>
<td>Water layers (see below).</td>
</tr>
<tr>
<td class="orange">byte [524]</td>
<td>524</td>
<td>Unknown.</td>
</tr>
</tbody>
</table>
				</div>
		</div>
	
		<div class="section">
				<div class="section-header" name="terrain_blocks">Terrain Blocks</div>

				<div id="terrain_blocks_content" class="section-content">
				<p>The Terrain Header is always 2821 bytes in length.</p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Data Type</th>
<th>Size</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Height</strong></td>
<td class="red">signed short</td>
<td><strong>Full map size * Full map size</strong> * 2</td>
</tr>
<tr>
<td></td>
<td></td>
<td>Height value for every point on the grid. This value will be multiplied with the map scale multiplier.</td>
</tr>
<tr>
<td><strong>Color</strong></td>
<td class="red">float [4]</td>
<td><strong>Full map size * Full map size</strong> * 4</td>
</tr>
<tr>
<td></td>
<td></td>
<td>Color values for every point on the grid. 4 floats (from 0.0 to 1.0) corresponding to the RGBA channels.</td>
</tr>
<tr>
<td><strong>Color 2</strong></td>
<td class="red">float [4]</td>
<td><strong>Full map size * Full map size</strong> * 4</td>
</tr>
<tr>
<td></td>
<td></td>
<td>Color values for every point on the grid. 4 floats (from 0.0 to 1.0) corresponding to the RGBA channels.</td>
</tr>
<tr>
<td><strong>Color 3</strong></td>
<td class="red">float [4]</td>
<td><strong>Full map size * Full map size</strong> * 4</td>
</tr>
<tr>
<td></td>
<td></td>
<td>Color values for every point on the grid. 4 floats (from 0.0 to 1.0) corresponding to the RGBA channels.</td>
</tr>
<tr>
<td><strong>Texture</strong></td>
<td class="orange">byte [16]</td>
<td><strong>Full map size * Full map size</strong> * 16</td>
</tr>
<tr>
<td></td>
<td></td>
<td>One byte (0-255) for each texture layer indicating the transparency of its texture layer.</td>
</tr>
<tr>
<td><strong>Water</strong></td>
<td class="orange">byte</td>
<td><strong>Full map size * Full map size</strong> / 2</td>
</tr>
<tr>
<td></td>
<td></td>
<td>Structure unknown.</td>
</tr>
<tr>
<td><strong>Foliage</strong></td>
<td class="orange">byte</td>
<td><strong>Full map size * Full map size</strong> / 2</td>
</tr>
<tr>
<td></td>
<td></td>
<td>Structure unknown.</td>
</tr>
</tbody>
</table>
				</div>
		</div>
	
		<div class="section">
				<div class="section-header" name="terrain_structs">Terrain Structs</div>

				<div id="terrain_structs_content" class="section-content">
				<h3>TextureLayer</h3>
<table>
<thead>
<tr>
<th>Data Type</th>
<th>Size (bytes)</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="green">char [32]</td>
<td>32</td>
<td>Diffuse texture name.</td>
</tr>
<tr>
<td class="green">char [32]</td>
<td>32</td>
<td>Detail texture name.</td>
</tr>
</tbody>
</table>
<h3>WaterLayer</h3>
<table>
<thead>
<tr>
<th>Data Type</th>
<th>Size (bytes)</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="red">float [2]</td>
<td>8</td>
<td>Water height value (twice).</td>
</tr>
<tr>
<td class="orange">byte [8]</td>
<td>8</td>
<td>Unknown, always zero.</td>
</tr>
<tr>
<td class="red">float [2]</td>
<td>8</td>
<td>UV animation velocity.</td>
</tr>
<tr>
<td class="red">float [2]</td>
<td>8</td>
<td>UV animation repeat.</td>
</tr>
<tr>
<td class="orange">byte [4]</td>
<td>4</td>
<td>RGBA color values.</td>
</tr>
<tr>
<td class="green">char [32]</td>
<td>32</td>
<td>Water texture name.</td>
</tr>
</tbody>
</table>
<h3>End-of-file Block</h3>
<p>Can be empty</p>
<table>
<thead>
<tr>
<th>Data Type</th>
<th>Size (bytes)</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="red">int</td>
<td>4</td>
<td>Length of the block.</td>
</tr>
<tr>
<td class="red">int</td>
<td>4</td>
<td>Number of items. Can be zero, in which case there are no further fields and this block ends.</td>
</tr>
<tr>
<td class="red">int</td>
<td>4</td>
<td>Number of (sub-)items?</td>
</tr>
</tbody>
</table>
				</div>
		</div>
	
</div>
    		
            </div>
		</div>
	</body>
</html>