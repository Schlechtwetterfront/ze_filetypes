<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>Star Wars Battlefront - TER File Information</title>

<meta name="GENERATOR" content="MSHTML 8.00.6001.18812"><style type="text/css"></style></head>
<body>
<div style="TEXT-ALIGN: center">
<h1>Star Wars: Battlefront<br>TER File Information</h1></div><br>
<h2>TER Files</h2>Terrain files, with extension *.ter, represent a single 
terrain to be used by a world.&nbsp; This file format is generated by 
ZeroEditor, and used during the munge process.<br><br>The data stored in terrain 
files is used to create the "tern" chunk within *.lvl files.<br>
<h2>Data Organization</h2>Data contained in *.ter files is organized as 
follows:<br><br>
<table style="TEXT-ALIGN: left; WIDTH: 100%" border="1" cellspacing="0" cellpadding="2">
  <tbody>
  <tr>
    <td style="BACKGROUND-COLOR: rgb(239,239,239); VERTICAL-ALIGN: top"><big style="FONT-WEIGHT: bold">Header</big><br><br>The header is always exactly 
      2820 bytes in length.<br><br>
      <table style="TEXT-ALIGN: left; WIDTH: 100%" border="1" cellspacing="0" cellpadding="2">
        <tbody>
        <tr>
          <td style="VERTICAL-ALIGN: top; FONT-WEIGHT: bold">Offset<br></td>
          <td style="VERTICAL-ALIGN: top; FONT-WEIGHT: bold">Data&nbsp;Type<br></td>
          <td style="VERTICAL-ALIGN: top; FONT-WEIGHT: bold">Size&nbsp;(bytes)<br></td>
          <td style="VERTICAL-ALIGN: top; FONT-WEIGHT: bold">Description<br></td></tr>
        <tr>
          <td style="FONT-FAMILY: courier new; VERTICAL-ALIGN: top"><small>0x0000<br></small></td>
          <td style="FONT-FAMILY: courier new; VERTICAL-ALIGN: top"><small>char[4]<br></small></td>
          <td style="TEXT-ALIGN: right; VERTICAL-ALIGN: top">4 <br></td>
          <td style="VERTICAL-ALIGN: top">Terrain marker, always 
        "TERR".<br></td></tr>
        <tr>
          <td style="FONT-FAMILY: courier new; VERTICAL-ALIGN: top"><small>0x0004<br></small></td>
          <td style="FONT-FAMILY: courier new; VERTICAL-ALIGN: top"><small>int<br></small></td>
          <td style="TEXT-ALIGN: right; VERTICAL-ALIGN: top">4 <br></td>
          <td style="VERTICAL-ALIGN: top">32-bit integer, possibly the .TER file format version.&nbsp; 21 for SWBF1 .TERs, 22 for SWBF2 .TERs.<br></td></tr>
        <tr>
          <td style="FONT-FAMILY: courier new; VERTICAL-ALIGN: top"><small>0x0008<br></small></td>
          <td style="FONT-FAMILY: courier new; VERTICAL-ALIGN: top"><small>short[4]<br></small></td>
          <td style="TEXT-ALIGN: right; VERTICAL-ALIGN: top">8 <br></td>
          <td style="VERTICAL-ALIGN: top">Four 16-bit integers that specify 
            the grid locations for the first and last row / column, compared to 
            the map center.&nbsp; I will term these values the <span style="FONT-STYLE: italic">Visible Grid Co-ordinates</span>.<br>(eg. 
            for a 256x256 map, these are typically -128 and +128)<br></td></tr>
        <tr>
          <td style="FONT-FAMILY: courier new; VERTICAL-ALIGN: top"><small>0x0010<br></small></td>
          <td style="FONT-FAMILY: courier new; VERTICAL-ALIGN: top"><small>int<br></small></td>
          <td style="TEXT-ALIGN: right; VERTICAL-ALIGN: top">4 <br></td>
          <td style="VERTICAL-ALIGN: top">32-bit integer, unknown 
            purpose.&nbsp; This appears to always be a value of 164.<br></td></tr>
        <tr>
          <td style="FONT-FAMILY: courier new; VERTICAL-ALIGN: top"><small>0x0014<br></small></td>
          <td style="FONT-FAMILY: courier new; VERTICAL-ALIGN: top"><small>float[16]<br></small></td>
          <td style="TEXT-ALIGN: right; VERTICAL-ALIGN: top">64 <br></td>
          <td style="VERTICAL-ALIGN: top">Sixteen 32-bit floating point 
            values, specifying the tile-range for each texture layer.&nbsp; This 
            is stored as the reciprocal (1/X) of the value that appears in 
            ZeroEdit.&nbsp; This value affects the scale of the texture applied 
            to each grid (default is 0.3125, or 1/32, which indicates the 
            texture spans 32 meters).<br></td></tr>
        <tr>
          <td style="FONT-FAMILY: courier new; VERTICAL-ALIGN: top"><small>0x0054<br></small></td>
          <td style="FONT-FAMILY: courier new; VERTICAL-ALIGN: top"><small>byte[16]<br></small></td>
          <td style="TEXT-ALIGN: right; VERTICAL-ALIGN: top">16 <br></td>
          <td style="VERTICAL-ALIGN: top">Sixteen 8-bit integers, specifying 
            the mapping for each texture layer.&nbsp; Setting this a value other 
            than 0 changes the way the texture is applied to the 
        terrain.<br></td></tr>
        <tr>
          <td style="FONT-FAMILY: courier new; VERTICAL-ALIGN: top"><small>0x0064<br></small></td>
          <td style="FONT-FAMILY: courier new; VERTICAL-ALIGN: top"><small>byte[64]<br></small></td>
          <td style="TEXT-ALIGN: right; VERTICAL-ALIGN: top">64 <br></td>
          <td style="VERTICAL-ALIGN: top">Block of 64 bytes, unknown purpose 
            and structure.&nbsp; (I suspect this was intended to store sixteen 
            32-bit floating point rotation values for each texture layer.&nbsp; 
            ZeroEdit uses the rotation values if you change them during an 
            editing session, but they don't get stored in the file!)<br></td></tr>
        <tr>
          <td style="FONT-FAMILY: courier new; VERTICAL-ALIGN: top"><small>0x00A4<br></small></td>
          <td style="FONT-FAMILY: courier new; VERTICAL-ALIGN: top"><small>float<br></small></td>
          <td style="TEXT-ALIGN: right; VERTICAL-ALIGN: top">4 <br></td>
          <td style="VERTICAL-ALIGN: top">32-bit floating point number, 
            specifying the map scale for terrain height.&nbsp; During the munge 
            process, all terrain height values are multiplied by this.&nbsp; 
            ZeroEditor sets this to 0.01 by default.<br></td></tr>
        <tr>
          <td style="FONT-FAMILY: courier new; VERTICAL-ALIGN: top"><small>0x00A8<br></small></td>
          <td style="FONT-FAMILY: courier new; VERTICAL-ALIGN: top"><small>float<br></small></td>
          <td style="TEXT-ALIGN: right; VERTICAL-ALIGN: top">4 <br></td>
          <td style="VERTICAL-ALIGN: top">32-bit floating point number, 
            specifying the map scale for each grid (in both the X and Y 
            directions).&nbsp; ZeroEditor sets this to 8.0 by default.<br></td></tr>
        <tr>
          <td style="FONT-FAMILY: courier new; VERTICAL-ALIGN: top"><small>0x00AC<br></small></td>
          <td style="FONT-FAMILY: courier new; VERTICAL-ALIGN: top"><small>int<br></small></td>
          <td style="TEXT-ALIGN: right; VERTICAL-ALIGN: top">4 <br></td>
          <td style="VERTICAL-ALIGN: top">32-bit integer, unknown 
          purpose.<br></td></tr>
        <tr>
          <td style="FONT-FAMILY: courier new; VERTICAL-ALIGN: top"><small>0x00B0<br></small></td>
          <td style="FONT-FAMILY: courier new; VERTICAL-ALIGN: top"><small>int<br></small></td>
          <td style="TEXT-ALIGN: right; VERTICAL-ALIGN: top">4 <br></td>
          <td style="VERTICAL-ALIGN: top">32-bit integer, specifying the full 
            map size stored by this file.&nbsp; This value will be termed the 
            <span style="FONT-STYLE: italic">Total Grid Size</span>.&nbsp; Note 
            that the actual map size will be clipped according to the Visible 
            Grid Co-ordinates.<br></td></tr>
        <tr>
          <td style="FONT-FAMILY: courier new; VERTICAL-ALIGN: top"><small>0x00B4<br></small></td>
          <td style="FONT-FAMILY: courier new; VERTICAL-ALIGN: top"><small>int<br></small></td>
          <td style="TEXT-ALIGN: right; VERTICAL-ALIGN: top">4 <br></td>
          <td style="VERTICAL-ALIGN: top">32-bit integer, unknown 
          purpose.<br></td></tr>
		<tr>
          <td style="FONT-FAMILY: courier new; VERTICAL-ALIGN: top"><small>0x00B8<br></small></td>
          <td style="FONT-FAMILY: courier new; VERTICAL-ALIGN: top"><small>char<br></small></td>
          <td style="TEXT-ALIGN: right; VERTICAL-ALIGN: top">1 <br></td>
          <td style="VERTICAL-ALIGN: top">1 byte, purpose unknown.<br></td></tr>
        <tr>
          <td style="FONT-FAMILY: courier new; VERTICAL-ALIGN: top"><small>0x00B9<br></small></td>
          <td style="FONT-FAMILY: courier new; VERTICAL-ALIGN: top"><small>char[32][2][16]<br></small></td>
          <td style="TEXT-ALIGN: right; VERTICAL-ALIGN: top">1024 <br></td>
          <td style="VERTICAL-ALIGN: top">Sixteen pairs of zero-terminated 
            strings.&nbsp; For each pair, the first string is the filename of 
            the main texture; and the second string is the filename of the 
            detail texture.<br>These sixteen texture filenames make up the 
            Texture Layers.<br></td></tr>
        <tr>
          <td style="FONT-FAMILY: courier new; VERTICAL-ALIGN: top"><small>0x04B9<br></small></td>
          <td style="FONT-FAMILY: courier new; VERTICAL-ALIGN: top"><small>byte[68]<br></small></td>
          <td style="TEXT-ALIGN: right; VERTICAL-ALIGN: top">68 <br></td>
          <td style="VERTICAL-ALIGN: top">Block of 68 bytes, unknown purpose 
            and structure.&nbsp; (This may be an unused water layer 
        slot)<br></td></tr>
        <tr>
          <td style="FONT-FAMILY: courier new; VERTICAL-ALIGN: top"><small>0x04FD<br></small></td>
          <td style="FONT-FAMILY: courier new; VERTICAL-ALIGN: top"><small>struct[15]:<br>float[2],<br>? 
            int[2] 
          ?,<br>float[2],<br>float[2],<br>int,<br>char[32]<br></small></td>
          <td style="TEXT-ALIGN: right; VERTICAL-ALIGN: top">1020 <br></td>
          <td style="VERTICAL-ALIGN: top">Layers 1 through 15 Water 
            information, each block of 68 bytes organized as follows:<br>Water 
            height value (this appears to be stored twice, as two 32-bit 
            floating point values with the same value).<br>Unknown values (8 
            bytes that are always zero).<br>U and V animation velocity (two 
            32-bit floating point values).<br>U and V animation repeat values 
            (two 32-bit floating point values).<br>ARGB color value (one 32-bit 
            integer).<br>Zero-terminated string specifying the texture filename 
            (32 bytes).<br></td></tr>
        <tr>
          <td style="FONT-FAMILY: courier new; VERTICAL-ALIGN: top"><small>0x08F9<br></small></td>
          <td style="FONT-FAMILY: courier new; VERTICAL-ALIGN: top"><small>byte[524] 
            <br></small></td>
          <td style="TEXT-ALIGN: right; VERTICAL-ALIGN: top">524 <br></td>
          <td style="VERTICAL-ALIGN: top">Block of 524 bytes, unknown purpose 
            and structure.<br></td></tr></tbody></table><br>The Visible Grid 
      Co-ordinates are used to resolve the data from the blocks that follow that 
      is to be munged.&nbsp; Think of these co-ordinates as being used to clip 
      the map surface, both for manipulating inside the editor, and for the 
      munging process.<br>This data storage technique is useful if the map 
      creator decides to change the map size, or to shift the visible portion of 
      the map; while still maintaining all relevant terrain information outside 
      of the clipped area.<br><br></td></tr></tbody></table><br>The blocks of data 
that follow are organized into a two-dimensional array, indexed into the map 
grid.&nbsp; The size of these blocks are always some multiple of (Total Grid 
Size * Total Grid Size).<br><br>When a terrain is first loaded into ZeroEditor, 
the first row of data is the map edge found "behind" the camera.&nbsp; The first 
column of data is the map edge to camera-left.<br><br>
<table style="TEXT-ALIGN: left; WIDTH: 100%" border="1" cellspacing="0" cellpadding="2">
  <tbody>
  <tr>
    <td style="BACKGROUND-COLOR: rgb(239,239,239); VERTICAL-ALIGN: top"><big><span style="FONT-WEIGHT: bold">Terrain Height Block</span></big><br><br>The 
      terrain height data always follows the header, and therefore always begins 
      at offset 0x00000B04.&nbsp; Each terrain height value is a signed 16-bit 
      integer.&nbsp; The total size of this block of data is (2 * Total Grid 
      Size * Total Grid Size).<br><br></td></tr></tbody></table><br>
<table style="TEXT-ALIGN: left; WIDTH: 100%" border="1" cellspacing="0" cellpadding="2">
  <tbody>
  <tr>
    <td style="BACKGROUND-COLOR: rgb(239,239,239); VERTICAL-ALIGN: top"><big><span style="FONT-WEIGHT: bold">Terrain Color Block</span></big><br><br>Each 
      terrain color value is a 32-bit ARGB value.&nbsp; The total size of this 
      block of data is (4 * Total Grid Size * Total Grid 
  Size).<br><br></td></tr></tbody></table><br>
<table style="TEXT-ALIGN: left; WIDTH: 100%" border="1" cellspacing="0" cellpadding="2">
  <tbody>
  <tr>
    <td style="BACKGROUND-COLOR: rgb(239,239,239); VERTICAL-ALIGN: top"><big style="FONT-WEIGHT: bold">Additional Color Block</big><br><br>There 
      appears to be a second set of color data.&nbsp; I'm unclear as to the 
      purpose of this data.&nbsp; It is organized the same as the Terrain 
      Color.<br><br></td></tr></tbody></table><br>
<table style="TEXT-ALIGN: left; WIDTH: 100%" border="1" cellspacing="0" cellpadding="2">
  <tbody>
  <tr>
    <td style="BACKGROUND-COLOR: rgb(239,239,239); VERTICAL-ALIGN: top"><big style="FONT-WEIGHT: bold">Terrain Texture Block</big><br><br>Each group of 
      terrain texture values for a grid location consists of 16 texture alpha 
      values.&nbsp; Each alpha value corresponds to the same texture 
      layer.&nbsp; The total size of this block of data is (16 * Total Grid Size 
      * Total Grid Size).<br><br></td></tr></tbody></table><br>
<table style="TEXT-ALIGN: left; BACKGROUND-COLOR: rgb(239,239,239); WIDTH: 100%" border="1" cellspacing="0" cellpadding="2">
  <tbody>
  <tr>
    <td style="VERTICAL-ALIGN: top"><big style="FONT-WEIGHT: bold">Terrain 
      Water Block</big><br><br>I'm unclear as to the method being used to store 
      this data.&nbsp; In ZeroEditor, there are 15 water layers available, 
      though I suspect the data here could actually accommodate 16 layers.&nbsp; 
      The total size of this block of data is (Total Grid Size * Total Grid Size 
      / 2).<br><br></td></tr></tbody></table><br>
<table style="TEXT-ALIGN: left; WIDTH: 100%" border="1" cellspacing="0" cellpadding="2">
  <tbody>
  <tr>
    <td style="BACKGROUND-COLOR: rgb(239,239,239); VERTICAL-ALIGN: top"><big><span style="FONT-WEIGHT: bold">Terrain Foliage Block</span></big><br><br>In 
      ZeroEditor, there are 4 foliage layers.&nbsp; The data here is stored in a 
      bitwise manner, where each 4 bits (half-byte) indicates which layers are 
      active for the corresponding grid location.&nbsp; The total size of this 
      block of data is (Total Grid Size * Total Grid Size / 
  2).<br><br></td></tr></tbody></table><br>
</body></html>