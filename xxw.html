<!doctype html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">

		
		<title>.xxw Format</title>
		

		<meta name="description" content="">
		<meta name="keywords" content="programming, code">

		<link rel="shortcut icon" type="image/png" href="../images/personal_logo_small.png"/>
		<link rel="stylesheet" href="../css/subpage-style.css" type="text/css" />
	</head>
	<body class="page-fileformats">

		<div class="container">

			
				<aside class="menu">
	<a href="/ze_filetypes/" class="no-style home">
		
		<h1 class="page-title not-fancy">
		
			.xxw Format
		
		</h1>
	</a>
	<span class="no-select hr">&middot; &middot; &middot;</span>
	<ul class="navigation blocks">
		
		
		
			<li class="category"><h6 class="category-title">Navigation</h6></li>
			
			<li class="link"><a href="#overview">Overview</a></li>
			
			<li class="link"><a href="index.html">Back</a></li>
			
		
			<li class="category"><h6 class="category-title">Format</h6></li>
			
			<li class="link"><a href="terrain-header">Terrain Header</a></li>
			
			<li class="link"><a href="terrain-header">Terrain Blocks</a></li>
			
			<li class="link"><a href="terrain-structs">Terrain Structs</a></li>
			
		
		
		
	</ul>
</aside>
			

			
			<div class="content">
				
				

				
						
							<section class="block">

<h2 id="overview">Overview</h2>

<p>Terrain files (<code>*.xxw</code>) represent a single terrain to be used by a world.
This format was used in <em>Star Wars: The Clone Wars</em>.</p>
<p>This page contains snippets of research.</p>

</section>
						
							<section class="block">

<h2 id="terrain-header">Terrain Header</h2>

<p>The Terrain Header is always 1152 bytes in length.</p>
<pre><code>ad  length  type    ex          desc
0   4       ?       1152        ?
4           long    3           version?
8           long    1024        terrain size?
12          int     257         ?
16          int     2           ?
20          float   32          grid size?
24          float   0.1...      ?
28          
32          int     128         map size?
36
40          int     128         extents with 8? or 6 sets of RGB colors?

64-124      float               Tile-range for each texture layer


1,668 -     514 size chunks?
132,218
--- BLOCKS
size * size (* 2) heights
xV4_ ?


</code></pre>

<table>
<thead>
<tr>
<th>Offset</th>
<th>Data Type</th>
<th>Size (bytes)</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td class="orange">byte [4]</td>
<td>4</td>
<td>Header size indicator (1152).</td>
</tr>
<tr>
<td>4</td>
<td class="red">long uint</td>
<td>4</td>
<td>File format version? (03)</td>
</tr>
<tr>
<td>8</td>
<td class="red">long uint</td>
<td>4</td>
<td>? (1024)</td>
</tr>
<tr>
<td>12</td>
<td class="red">long uint</td>
<td>4</td>
<td>Terrain size. (257, 513)</td>
</tr>
<tr>
<td>16</td>
<td class="red">long uint</td>
<td>4</td>
<td>? (2)</td>
</tr>
<tr>
<td>20</td>
<td class="red">float </td>
<td>4</td>
<td>Grid scale. (32, 16, 8)</td>
</tr>
<tr>
<td>24</td>
<td class="red">float </td>
<td>4</td>
<td>Height scale. (0.1, 0.03, 0.23)</td>
</tr>
<tr>
<td>28</td>
<td class="red">long int [4]</td>
<td>16</td>
<td>Map extents (i.e. -256, 256, -256, 256 for a 512x512 map)</td>
</tr>
<tr>
<td>44+</td>
<td>?</td>
<td>20</td>
<td>?</td>
</tr>
<tr>
<td>64</td>
<td class="red">float [16] </td>
<td>64</td>
<td>Tile-range for each texture layer. <em>0.031 (1/32): the texture spans 32 meters. This is stored as 1/X of the value in ZeroEditor.</em></td>
</tr>
<tr>
<td>128</td>
<td>TextureLayer [16]</td>
<td>1024</td>
<td>Texture layers (see below).</td>
</tr>
</tbody>
</table>

</section>
						
							<section class="block">

<h2 id="terrain-blocks">Terrain Blocks</h2>

<p>The Terrain Header is always 2821 bytes in length.</p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Data Type</th>
<th>Size</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Height</strong></td>
<td class="red">signed short</td>
<td><strong>Terrain size * Terrain size</strong> * 2</td>
</tr>
<tr>
<td></td>
<td></td>
<td>Height value for every point on the grid. This value will be multiplied with the map scale multiplier.</td>
</tr>
<tr>
<td><strong>?</strong></td>
<td>?</td>
<td>Size: (Terrain size - 1) * (Terrain size - 1) * 2</td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><strong>?</strong></td>
<td>?</td>
<td>Size:</td>
</tr>
<tr>
<td></td>
<td></td>
<td>Chunks with 38 bytes of data?</td>
</tr>
</tbody>
</table>

</section>
						
							<section class="block">

<h2 id="terrain-structs">Terrain Structs</h2>

<h3>TextureLayer</h3>
<table>
<thead>
<tr>
<th>Data Type</th>
<th>Size (bytes)</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>char [32]</code></td>
<td>32</td>
<td>Diffuse texture name.</td>
</tr>
<tr>
<td><code>char [32]</code></td>
<td>32</td>
<td>Detail texture name.</td>
</tr>
</tbody>
</table>
<h3>WaterLayer</h3>
<table>
<thead>
<tr>
<th>Data Type</th>
<th>Size (bytes)</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>float [2]</code></td>
<td>8</td>
<td>Water height value (twice).</td>
</tr>
<tr>
<td><code>byte [8]</code></td>
<td>8</td>
<td>Unknown, always zero.</td>
</tr>
<tr>
<td><code>float [2]</code></td>
<td>8</td>
<td>UV animation velocity.</td>
</tr>
<tr>
<td><code>float [2]</code></td>
<td>8</td>
<td>UV animation repeat.</td>
</tr>
<tr>
<td><code>byte [4]</code></td>
<td>4</td>
<td>RGBA color values.</td>
</tr>
<tr>
<td><code>char [32]</code></td>
<td>32</td>
<td>Water texture name.</td>
</tr>
</tbody>
</table>

</section>
						
				
			</div>
			

			
				<footer>
</footer>
			

		</div>

	</body>
</html>